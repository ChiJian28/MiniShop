<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™»å½•åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
        }
        .test-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .demo-form {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        input:focus {
            border-color: #ff4000;
            outline: none;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s;
        }
        .login-btn { 
            background: #ff4000; 
            color: white; 
        }
        .login-btn:hover { 
            background: #e63600; 
            transform: translateY(-1px);
        }
        .demo-btn { 
            background: #10b981; 
            color: white; 
        }
        .demo-btn:hover { 
            background: #059669; 
        }
        .test-btn { 
            background: #3b82f6; 
            color: white; 
        }
        .test-btn:hover { 
            background: #2563eb; 
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        .success { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
        .error { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        .info { background: #dbeafe; color: #1e40af; border: 1px solid #bfdbfe; }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .feature-item {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .feature-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” MiniShop ç™»å½•åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-card">
        <h3>åŠŸèƒ½æ¦‚è¿°</h3>
        <p>è¿™ä¸ªç™»å½•ç³»ç»ŸåŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
        <div class="feature-grid">
            <div class="feature-item">
                <div class="feature-icon">ğŸ”’</div>
                <strong>å®‰å…¨è®¤è¯</strong><br>
                <small>JWT Token å­˜å‚¨</small>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸš€</div>
                <strong>è‡ªåŠ¨è·³è½¬</strong><br>
                <small>ç™»å½•åè·³è½¬ç§’æ€é¡µ</small>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ“±</div>
                <strong>å“åº”å¼è®¾è®¡</strong><br>
                <small>é€‚é…ç§»åŠ¨ç«¯</small>
            </div>
            <div class="feature-item">
                <div class="feature-icon">âš¡</div>
                <strong>è¡¨å•éªŒè¯</strong><br>
                <small>å®æ—¶é”™è¯¯æç¤º</small>
            </div>
        </div>
    </div>

    <div class="test-card">
        <h3>ç™»å½•æµ‹è¯•</h3>
        <div class="demo-form">
            <div class="form-group">
                <label for="username">ç”¨æˆ·å:</label>
                <input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" value="admin">
            </div>
            <div class="form-group">
                <label for="password">å¯†ç :</label>
                <input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç " value="password">
            </div>
            <button class="login-btn" onclick="testLogin()">ç™»å½•æµ‹è¯•</button>
            <button class="demo-btn" onclick="fillDemo()">å¡«å…¥æ¼”ç¤ºè´¦å·</button>
            <button class="test-btn" onclick="testValidation()">æµ‹è¯•è¡¨å•éªŒè¯</button>
        </div>
        <div id="loginResult"></div>
    </div>

    <div class="test-card">
        <h3>è·¯ç”±æµ‹è¯•</h3>
        <p>æµ‹è¯•ä¸åŒçš„è·¯ç”±è¡Œä¸ºï¼š</p>
        <button class="test-btn" onclick="testRoute('/')">è®¿é—®æ ¹è·¯å¾„ (/)</button>
        <button class="test-btn" onclick="testRoute('/login')">è®¿é—®ç™»å½•é¡µ (/login)</button>
        <button class="test-btn" onclick="testRoute('/seckill')">è®¿é—®ç§’æ€é¡µ (/seckill)</button>
        <button class="test-btn" onclick="openMainApp()">æ‰“å¼€å®Œæ•´åº”ç”¨</button>
        <div id="routeResult"></div>
    </div>

    <div class="test-card">
        <h3>é¢„æœŸè¡Œä¸º</h3>
        <div class="status info">
            <strong>ç™»å½•æµç¨‹ï¼š</strong>
            <ol style="margin: 10px 0; padding-left: 20px;">
                <li>ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç </li>
                <li>ç‚¹å‡»"ç™»å½•"æŒ‰é’®</li>
                <li>å‰ç«¯éªŒè¯è¡¨å•ï¼ˆéç©ºã€é•¿åº¦æ£€æŸ¥ï¼‰</li>
                <li>å‘é€ POST è¯·æ±‚åˆ° /api/v1/auth/login</li>
                <li>æˆåŠŸåå­˜å‚¨ token åˆ° localStorage</li>
                <li>è‡ªåŠ¨è·³è½¬åˆ° /seckill é¡µé¢</li>
                <li>Header æ˜¾ç¤ºç”¨æˆ·åå’Œ"é€€å‡º"æŒ‰é’®</li>
            </ol>
        </div>
        
        <div class="status success">
            <strong>æ¼”ç¤ºè´¦å·ï¼š</strong> admin / password<br>
            <strong>ä»»æ„è´¦å·ï¼š</strong> ä»»ä½•éç©ºç”¨æˆ·åå¯†ç éƒ½å¯ä»¥ç™»å½•ï¼ˆæ¼”ç¤ºæ¨¡å¼ï¼‰
        </div>
    </div>

    <div class="test-card">
        <h3>æŠ€æœ¯å®ç°</h3>
        <ul>
            <li>âœ… React Router DOM è·¯ç”±ç®¡ç†</li>
            <li>âœ… Context API çŠ¶æ€ç®¡ç†</li>
            <li>âœ… Protected Routes è·¯ç”±ä¿æŠ¤</li>
            <li>âœ… localStorage Token æŒä¹…åŒ–</li>
            <li>âœ… è¡¨å•éªŒè¯å’Œé”™è¯¯å¤„ç†</li>
            <li>âœ… å“åº”å¼ UI è®¾è®¡</li>
            <li>âœ… åŠ è½½çŠ¶æ€å’Œç”¨æˆ·åé¦ˆ</li>
        </ul>
    </div>

    <script>
        function testLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const resultDiv = document.getElementById('loginResult');
            
            resultDiv.innerHTML = '<div class="status info">æ­£åœ¨æµ‹è¯•ç™»å½•...</div>';
            
            // æ¨¡æ‹Ÿç™»å½•é€»è¾‘
            setTimeout(() => {
                if (!username || !password) {
                    resultDiv.innerHTML = '<div class="status error">âŒ ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©º</div>';
                } else if (username.length < 2) {
                    resultDiv.innerHTML = '<div class="status error">âŒ ç”¨æˆ·åè‡³å°‘2ä¸ªå­—ç¬¦</div>';
                } else if (password.length < 4) {
                    resultDiv.innerHTML = '<div class="status error">âŒ å¯†ç è‡³å°‘4ä¸ªå­—ç¬¦</div>';
                } else {
                    const token = 'mock_jwt_token_' + Date.now();
                    localStorage.setItem('token', token);
                    localStorage.setItem('user', JSON.stringify({id: 1, username}));
                    
                    resultDiv.innerHTML = `
                        <div class="status success">
                            âœ… ç™»å½•æˆåŠŸï¼<br>
                            Token: ${token.substring(0, 30)}...<br>
                            ç”¨æˆ·: ${username}<br>
                            <strong>åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œç°åœ¨ä¼šè·³è½¬åˆ°ç§’æ€é¡µé¢</strong>
                        </div>
                    `;
                }
            }, 1500);
        }
        
        function fillDemo() {
            document.getElementById('username').value = 'admin';
            document.getElementById('password').value = 'password';
        }
        
        function testValidation() {
            document.getElementById('username').value = '';
            document.getElementById('password').value = '123';
            testLogin();
        }
        
        function testRoute(path) {
            const resultDiv = document.getElementById('routeResult');
            resultDiv.innerHTML = `
                <div class="status info">
                    æµ‹è¯•è·¯ç”±: ${path}<br>
                    åœ¨çœŸå®åº”ç”¨ä¸­ï¼š<br>
                    â€¢ / â†’ é‡å®šå‘åˆ° /seckill<br>
                    â€¢ /login â†’ ç™»å½•é¡µé¢ï¼ˆå·²ç™»å½•ç”¨æˆ·ä¼šé‡å®šå‘åˆ° /seckillï¼‰<br>
                    â€¢ /seckill â†’ ç§’æ€é¡µé¢ï¼ˆæœªç™»å½•ç”¨æˆ·ä¼šé‡å®šå‘åˆ° /loginï¼‰
                </div>
            `;
        }
        
        function openMainApp() {
            window.open('http://localhost:3000', '_blank');
        }
        
        // æ˜¾ç¤ºå½“å‰å­˜å‚¨çš„è®¤è¯ä¿¡æ¯
        window.onload = function() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (token) {
                const userObj = user ? JSON.parse(user) : null;
                document.getElementById('loginResult').innerHTML = `
                    <div class="status success">
                        å½“å‰å·²ç™»å½•çŠ¶æ€ï¼š<br>
                        Token: ${token.substring(0, 30)}...<br>
                        ç”¨æˆ·: ${userObj?.username || 'æœªçŸ¥'}
                    </div>
                `;
            }
        };
    </script>
</body>
</html> 